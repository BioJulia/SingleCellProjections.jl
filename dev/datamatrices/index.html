<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Data Matrices · SingleCellProjections.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link rel="canonical" href="https://BioJulia.github.io/SingleCellProjections.jl/datamatrices/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">SingleCellProjections.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../tutorial/">Tutorial</a></li><li class="is-active"><a class="tocitem" href>Data Matrices</a><ul class="internal"><li><a class="tocitem" href="#Variables"><span>Variables</span></a></li><li><a class="tocitem" href="#Observations"><span>Observations</span></a></li><li><a class="tocitem" href="#IDs"><span>IDs</span></a></li><li><a class="tocitem" href="#Matrix"><span>Matrix</span></a></li></ul></li><li><a class="tocitem" href="../matrixexpressions/">Matrix Expressions</a></li><li><a class="tocitem" href="../interface/">Interface</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Data Matrices</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Data Matrices</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/BioJulia/SingleCellProjections.jl/blob/main/docs/src/datamatrices.md#" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Data-Matrices"><a class="docs-heading-anchor" href="#Data-Matrices">Data Matrices</a><a id="Data-Matrices-1"></a><a class="docs-heading-anchor-permalink" href="#Data-Matrices" title="Permalink"></a></h1><p><code>DataMatrix</code> objects – annotated matrices where rows are variables and columns are observations – are central in SingleCellProjections.jl. A <code>DataMatrix</code> is also sometimes called an &quot;Assay&quot;, in other software packages.</p><p>An overview of a <code>DataMatrix</code> is shown when the object is displayed:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; data</code><code class="nohighlight hljs ansi" style="display:block;">DataMatrix (33766 variables and 35340 observations)
  SparseMatrixCSC{Int64, Int32}
  Variables: <span class="sgr4">id</span>, <span class="sgr4">feature_type</span>, name, genome, read, pattern, sequence
  Observations: <span class="sgr4">id</span>, sampleName, barcode</code></pre><p>Here we see the matrix size (number of variables and observations), a brief description of the matrix contents, and an overview of available variable and observation annotations. The underlined annotation names are the ID columns (see <a href="#IDs">IDs</a> below for more details).</p><h2 id="Variables"><a class="docs-heading-anchor" href="#Variables">Variables</a><a id="Variables-1"></a><a class="docs-heading-anchor-permalink" href="#Variables" title="Permalink"></a></h2><p>Variables, or <code>var</code> for short, are typically genes, features (such as CITE-seq features) or variables after dimension reduction (e.g. &quot;UMAP1&quot;). The variables are stored as a <a href="https://dataframes.juliadata.org/stable/"><code>DataFrame</code></a> and can be accessed by:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; data.var</code><code class="nohighlight hljs ansi" style="display:block;"><span class="sgr1">33766×7 DataFrame</span>
<span class="sgr1">   Row </span>│<span class="sgr1"> id           feature_type      name         genome  read    pattern  sequence </span>
       │<span class="sgr90"> String       String            String       String  String  String   String   </span>
───────┼───────────────────────────────────────────────────────────────────────────────
     1 │ MIR1302-2HG  Gene Expression   MIR1302-2HG  hg19
     2 │ FAM138A      Gene Expression   FAM138A      hg19
     3 │ OR4F5        Gene Expression   OR4F5        hg19
     4 │ AL627309.1   Gene Expression   AL627309.1   hg19
   ⋮   │      ⋮              ⋮               ⋮         ⋮       ⋮        ⋮        ⋮
 33764 │ CD144        Antibody Capture  CD144        hg19
 33765 │ CD202b       Antibody Capture  CD202b       hg19
 33766 │ CD11c        Antibody Capture  CD11c        hg19
<span class="sgr36">                                                                     33759 rows omitted</span></code></pre><h2 id="Observations"><a class="docs-heading-anchor" href="#Observations">Observations</a><a id="Observations-1"></a><a class="docs-heading-anchor-permalink" href="#Observations" title="Permalink"></a></h2><p>Observations, or <code>obs</code> for short, are typically cells, but can in theory be any kind of observation. The observations are stored as a <a href="https://dataframes.juliadata.org/stable/"><code>DataFrame</code></a> and can be accessed by:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; data.obs</code><code class="nohighlight hljs ansi" style="display:block;"><span class="sgr1">35340×3 DataFrame</span>
<span class="sgr1">   Row </span>│<span class="sgr1"> id                      sampleName  barcode             </span>
       │<span class="sgr90"> String                  String      String              </span>
───────┼─────────────────────────────────────────────────────────
     1 │ P1_L1_AAACCCAAGACATACA  P1          L1_AAACCCAAGACATACA
     2 │ P1_L1_AAACCCACATCGGTTA  P1          L1_AAACCCACATCGGTTA
     3 │ P1_L1_AAACCCAGTGGAACAC  P1          L1_AAACCCAGTGGAACAC
     4 │ P1_L1_AAACCCATCTGCGGAC  P1          L1_AAACCCATCTGCGGAC
   ⋮   │           ⋮                 ⋮                ⋮
 35338 │ P2_L5_TTTGTTGTCAACACCA  P2          L5_TTTGTTGTCAACACCA
 35339 │ P2_L5_TTTGTTGTCATGCATG  P2          L5_TTTGTTGTCATGCATG
 35340 │ P2_L5_TTTGTTGTCCGTGCGA  P2          L5_TTTGTTGTCCGTGCGA
<span class="sgr36">                                               35333 rows omitted</span></code></pre><h2 id="IDs"><a class="docs-heading-anchor" href="#IDs">IDs</a><a id="IDs-1"></a><a class="docs-heading-anchor-permalink" href="#IDs" title="Permalink"></a></h2><p>Each variable and each observation must have a unique ID, that is, each row in the <code>DataFrame</code> should be unique if we consider the ID columns only. As seen above, the ID columns are underlined when displaying a DataMatrix. We can also access them directly:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; data.var_id_cols</code><code class="nohighlight hljs ansi" style="display:block;">2-element Vector{String}:
 &quot;id&quot;
 &quot;feature_type&quot;</code></pre><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; data.obs_id_cols</code><code class="nohighlight hljs ansi" style="display:block;">1-element Vector{String}:
 &quot;id&quot;</code></pre><p>Most of the time, IDs are handled automatically by SingleCellProjections.jl. Sometimes, you need to make sure IDs are unique when loading or merging data matrices. In particular, when loading a <code>DataMatrix</code> that should be projected onto another <code>DataMatrix</code>, the user must ensure that relevant IDs are matching.</p><h2 id="Matrix"><a class="docs-heading-anchor" href="#Matrix">Matrix</a><a id="Matrix-1"></a><a class="docs-heading-anchor-permalink" href="#Matrix" title="Permalink"></a></h2><p>The matrix can be accessed by <code>data.matrix</code>. Depending on the stage of analysis, different kinds of matrices (or matrix-like objects) are used. Most of this complexity is hidden from the user, but internally SingleCellProjections.jl depends on this functionality to be fast and to reduce memory usage.</p><div class="admonition is-warning"><header class="admonition-header">Read-only</header><div class="admonition-body"><p>SingleCellProjections.jl will reuse matrices when possible, in order to reduce memory usage. E.g. <a href="../interface/#SingleCellProjections.normalize_matrix-Tuple{DataMatrix, SingleCellProjections.DesignMatrix}"><code>normalize_matrix</code></a> will reuse and extend the Matrix Expression of the source <code>DataMatrix</code>, without creating a copy of the actual data. When matrices are reused/copied is considered an implementation detail, and can change at any time. Users of SingleCellProjections.jl should thus consider the matrices to be &quot;read-only&quot;. This should rarely present problems in practice.</p></div></div><p>Roughly, the matrix types used at different stages are:</p><ol><li>Counts - <a href="https://docs.julialang.org/en/v1/stdlib/SparseArrays/"><code>SparseMatrixCSC</code></a></li><li>Transformed and normalized data - <a href="../matrixexpressions/#Matrix-Expressions">Matrix Expressions</a></li><li>SVD (PCA) result - <a href="https://docs.julialang.org/en/v1/stdlib/LinearAlgebra/#LinearAlgebra.SVD"><code>SVD</code></a></li><li>ForceLayout/UMAP/t-SNE result - <code>Matrix{Float64}</code></li></ol></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../tutorial/">« Tutorial</a><a class="docs-footer-nextpage" href="../matrixexpressions/">Matrix Expressions »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Monday 14 August 2023 11:03">Monday 14 August 2023</span>. Using Julia version 1.9.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
